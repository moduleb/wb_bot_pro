Общий том (volume) в Docker — это механизм, который позволяет сохранять данные, которые могут быть использованы несколькими контейнерами. Это особенно полезно для хранения данных, которые должны сохраняться между перезапусками контейнеров, или для совместного использования кода и конфигураций между несколькими контейнерами.

### Как работает общий том:

1. **Создание тома**: Вы можете создать том с помощью команды Docker CLI или в файле `docker-compose.yml`. Например, чтобы создать том с помощью CLI, вы можете использовать команду:
   ```bash
   docker volume create my_shared_volume
   ```

2. **Монтирование тома в контейнер**: Когда вы запускаете контейнер, вы можете смонтировать созданный том в определенную директорию внутри контейнера. Это можно сделать с помощью флага `-v` в командной строке или в разделе `volumes` в `docker-compose.yml`.

   Пример с использованием `docker-compose.yml`:
   ```yaml
   version: '3.8'
   services:
     fastapi:
       image: your_fastapi_image
       volumes:
         - my_shared_volume:/app/shared
     celery:
       image: your_celery_image
       volumes:
         - my_shared_volume:/app/shared

   volumes:
     my_shared_volume:
   ```

3. **Доступ к данным**: После монтирования тома в контейнеры, все данные, которые записываются в указанную директорию (в данном случае `/app/shared`), будут доступны в обоих контейнерах. Если один контейнер изменит данные в этой директории, другой контейнер сможет увидеть эти изменения.

4. **Сохранение данных**: Данные, хранящиеся в томе, сохраняются даже после остановки и удаления контейнеров. Это позволяет вам сохранять состояние приложения или данные, которые могут быть использованы позже.

5. **Управление томами**: Вы можете управлять томами с помощью команд Docker, таких как `docker volume ls` для просмотра всех томов, `docker volume inspect` для получения информации о конкретном томе и `docker volume rm` для удаления тома.

### Преимущества использования общих томов:

- **Совместное использование данных**: Позволяет нескольким контейнерам работать с одними и теми же данными.
- **Сохранение данных**: Данные сохраняются между перезапусками контейнеров.
- **Изоляция**: Данные хранятся отдельно от контейнеров, что упрощает управление и резервное копирование.
- **Упрощение разработки**: Позволяет легко тестировать и разрабатывать приложения, которые требуют совместного доступа к данным.

Использование общих томов — это мощный инструмент для управления данными в Docker, который может значительно упростить архитектуру вашего приложения.